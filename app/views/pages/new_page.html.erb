<% if user_signed_in? %>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.3.0/main.min.js"></script>
<link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
<link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css">



<h1>Statistics for branch</h1>
<div id="calendar" class='custom-calendar'></div>


<script src='fullcalendar/dist/index.global.js'></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
  var calendarEl = document.getElementById('calendar');

  var calendar = new FullCalendar.Calendar(calendarEl, {
    themeSystem: 'bootstrap',
    selectable: true,
    select: function (info) {
      var start = info.start;
      var end = info.end;

      calendar.removeAllEventSources();
      calendar.addEventSource({
        events: [
          {
            start: start,
            end: end,
            rendering: 'background',
            color: '#7FFF00' 
          }
        ]
      });
      window.location.href = '/product_information/show_by_date?date=' + info.start.toISOString();
      $.ajax({
        type: 'GET',
        url: '/product_information/retrieve_by_date',
        data: { date: info.start.toISOString() },
        success: function(response) {

          $('#result-container').html(response);
        },
        error: function(error) {
          console.log('Error:', error);
        }
      });
      calendar.unselect();
    },
  });

  calendar.render();
});

</script>

<%else %>
<h1>YOU ARE NOT SIGNED IN</h1>



<% end %>